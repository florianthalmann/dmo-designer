<!doctype html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="stylesheets/main.css">
	<script src="bower_components/angular/angular.min.js"></script>
	<script src="bower_components/dymo-core/math/functioninverter.js"></script>
	<script src="bower_components/dymo-core/math/polygontools.js"></script>
	<script src="bower_components/dymo-core/io/globals.js"></script>
	<script src="bower_components/dymo-core/logic/dymo.js"></script>
	<script src="bower_components/dymo-core/logic/rendering.js"></script>
	<script src="bower_components/dymo-core/logic/mapping.js"></script>
	<script src="bower_components/dymo-core/logic/control.js"></script>
	<script src="bower_components/dymo-core/logic/parameter.js"></script>
	<script src="bower_components/dymo-core/io/dymoloader.js"></script>
	<script src="bower_components/dymo-core/io/dymowriter.js"></script>
	<script src="bower_components/dymo-core/audio/scheduler.js"></script>
	<script src="bower_components/dymo-core/audio/source.js"></script>
	<script src="bower_components/dymo-core/audio/processor.js"></script>
	<script src="bower_components/dymo-core/controls/browniancontrols.js"></script>
	<script src="bower_components/dymo-core/navigators/sequential.js"></script>
	<script src="bower_components/dymo-core/navigators/similarity.js"></script>
	<script src="bower_components/dymo-core/lib/AudioSampleLoader.js"></script>
	<script src="bower_components/dymo-core/lib/soundtouch-js/soundtouch-min.js"></script>
	<script src="bower_components/dymo-generator/dymo-templates.js"></script>
	<script src="bower_components/dymo-generator/dymo-generator.js"></script>
	<script src="bower_components/dymo-generator/feature-loader.js"></script>
	<script src="bower_components/dymo-generator/globals.js"></script>
	<script src="scripts/app.js"></script>
	<script src="scripts/services/d3.js" charset="utf-8"></script>
	<script src="scripts/controllers/maincontroller.js"></script>
	<script src="scripts/controllers/dymocontroller.js"></script>
	<script src="scripts/controllers/renderingcontroller.js"></script>
	<script src="scripts/directives/dymobubbles.js"></script>
	<script src="scripts/directives/dymograph.js"></script>
	<script src="scripts/directives/dymocoordinates.js"></script>
	<script src="scripts/directives/mappingspainter.js"></script>
</head>
<body ng-app="dymoDesigner">
	<div  ng-controller="MainController">
		<h1>Dymo Designer</h1>
		<div ng-controller="DymoController">
			<div>
				<span>activity:</span>
				<select ng-init="selectedActivity = activities[0]" ng-model="selectedActivity" ng-options="a.name for a in activities"></select>
				<button ng-click="play()">Play</button>
				<button ng-click="stop()">Stop</button>
			</div>
			<div ng-show="selectedActivity == activities[0]">
				<button ng-click="addDymo()">Add Dymo</button>
				<button ng-click="createAreasDemo(areas)">Area Demo</button>
				<span>source:</span>
				<select ng-model="selectedSource" ng-options="s for s in sourceFiles" ng-change="sourceSelected()"></select>
				<span>feature:</span>
				<select ng-model="selectedFeature" ng-options="f for f in featureFiles"></select>
				<span>condition:</span>
				<input type="text" ng-model="labelCondition" size="2"></input>
				<span>mode:</span>
				<select ng-init="selectedFeatureMode = featureModes[0]" ng-model="selectedFeatureMode" ng-options="m.name for m in featureModes"></select>
				<button ng-click="loadFeature()">Add Features</button>
				<button ng-click="save()">Save</button>
			</div>
			<div ng-controller="RenderingController" ng-show="selectedActivity == activities[1]">
				<div>
					<span>type:</span>
					<select ng-init="selectedMappingType = mappingTypes[0]" ng-model="selectedMappingType" ng-options="t.name for t in mappingTypes"></select>
					<span ng-show="selectedMappingType == mappingTypes[0]">
						feature:
						<select ng-init="selectedFeature = generator.features[0]" ng-model="selectedFeature" ng-options="p.name for p in generator.features"></select>
					</span>
					<span ng-show="selectedMappingType == mappingTypes[1]">
						control:
						<select ng-model="selectedControl" ng-options="c.name for c in uiControls"></select>
					</span>
					<span ng-show="selectedMappingType == mappingTypes[2]">
						control:
						<select ng-init="selectedControlType = controls[0]" ng-model="selectedControlType" ng-options="c.name for c in controls"></select>
						name:
						<input type="text" ng-model="controlName" size="10"></input>
					</span>
					<button ng-click="addDomainDim()">Add Domain Dimension</button>
					<span>available: </span>
					<span ng-repeat="d in currentDomainDims">
						<span>{{d.variable}} = {{d.name}}{{$last ? '' : ', '}}</span>
					</span>
				</div>
				<div>
					<span>function: y = </span>
					<input type="text" ng-model="mappingFunction" size="20"></input>
					<span>parameter:</span>
					<select ng-init="selectedParameter = parameters[0]" ng-model="selectedParameter" ng-options="p.name for p in parameters"></select>
					<span>level:</span>
					<input type="text" ng-init="mappingLevel = 1" ng-model="mappingLevel" size="2"></input>
					<button ng-click="addMapping()">Add Mapping</button>
					<button ng-click="save()">Save</button>
				</div>
				<div>
					Mappings: 
					<span ng-repeat="m in currentMappings">
						{{getFunctionReturnString(m.function)}} :
						<span ng-repeat="d in m.domainDims">
							{{d.name}}{{$last ? '' : ', '}}
						</span>
						-> {{m.parameter}}{{$last ? '' : ', '}}
					</span>
				</div>
				<div ng-repeat="u in uiControls">
					{{u.name}}
					<input type="range" name="slider" min="0" max="1" step=".001" ng-model="u.value" ng-change="u.updateMappings()">
				</div>
			</div>
			<div ng-show="selectedActivity == activities[2]">
				<span>view:</span>
				<select ng-init="selectedView = views[0]" ng-model="selectedView" ng-options="v.name for v in views"></select>
				<span ng-repeat="v in viewConfig">
					<span>{{v.name}}:</span>
					<select ng-model="v.param" ng-options="p.name for p in generator.features"></select>
					<input type="checkbox" ng-model="v.log"></input>
				</span>
			</div>
			<div ng-if="selectedView == views[0]">
				<dymo-coordinates data="generator.dymoGraph" viewconfig="viewConfig" playing="scheduler.urisOfPlayingDymos" label="name" on-click="dymoOnClick(item)"></dymo-coordinates>
			</div>
			<div ng-if="selectedView == views[1]">
				<dymo-graph data="generator.dymoGraph" viewconfig="viewConfig" playing="scheduler.urisOfPlayingDymos" label="name" on-click="dymoOnClick(item)"></dymo-graph>
			</div>
			<div ng-if="selectedView == views[2]">
				<dymo-graph data="generator.similarityGraph" viewconfig="viewConfig" playing="scheduler.urisOfPlayingDymos" label="name" on-click="dymoOnClick(item)"></dymo-graph>
			</div>
			<div ng-if="selectedView == views[3]">
				<mappings-painter data="areas" viewconfig="viewConfig" playing="scheduler.urisOfPlayingDymos" label="name" on-click="areaOnClick(item)" add-point="addPointToArea(item)" finish-area="finishArea()"></mappings-painter>
			</div>
			<!--div ng-show="selectedVisuals == views[2]">
				<dymo-bubbles data="dymoList" label="name" on-click="dymoOnClick(item)"></dymo-bubbles>
			</div-->
		</div>
	</div>
</body>
</html>